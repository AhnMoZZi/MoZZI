name: Streamlit Auto Deploy

on:
  push:
    branches:
      - main  # ğŸš¨ main ë¸Œëœì¹˜ì— ì½”ë“œ ë³€ê²½ì´ ë°œìƒí•˜ë©´ ìë™ìœ¼ë¡œ ë°°í¬

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: ì €ì¥ì†Œ í´ë¡ 
        uses: actions/checkout@v3

      - name: Python ì„¤ì •
        uses: actions/setup-python@v4
        with:
          python-version: "3.10"

      - name: ì˜ì¡´ì„± ì„¤ì¹˜
        run: |
          pip install -r requirements.txt

      - name: Streamlit ì‹¤í–‰ í…ŒìŠ¤íŠ¸
        run: |
          streamlit run app.py --server.headless true

      - name: ì˜¤ë¥˜ ë°œìƒ ì‹œ GitHub Issues ìƒì„±
        if: failure()
        run: |
          gh issue create -t "âš  Streamlit ì•± ì˜¤ë¥˜ ë°œìƒ" -b "ì˜¤ë¥˜ ë¡œê·¸ í™•ì¸ í›„ ì¡°ì¹˜ í•„ìš”!" --repo YOUR_GITHUB_USERNAME/YOUR_REPO_NAME
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
